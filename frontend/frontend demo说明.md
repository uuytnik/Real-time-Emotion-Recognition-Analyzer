# 前端设计方案说明

好的。遵照您的指示，我们采用 **方案A（选项卡式界面）**。

我已经将我们之前所有关于前端的讨论——包括核心功能、图片上传、UI元素、交互流程和体验增强——系统地整理成一份清晰、完整的前端设计方案。

这份文档可以作为前端负责人（主力B）的主要开发蓝图。

---

## **项目：实时表情识别分析器 - 前端设计方案 (Frontend Design Specification)**

### **一、 核心设计理念**

本设计旨在创建一个**清晰、直观、专业且富有互动性**的用户界面。所有设计决策都围绕以下三个核心原则：

1. **模式清晰 (Clear Modes)**：用户可以明确地在“实时视频分析”和“上传图片分析”两种模式间切换，两种模式的操作互不干扰。
2. **即时反馈 (Instant Feedback)**：用户的每一次操作（如点击按钮、上传文件）和系统的每一个状态（如加载中、分析中、出现错误）都应得到及时的视觉反馈。
3. **信息分层 (Hierarchical Information)**：分析结果的展示应有主次之分，从最醒目的核心情绪到详细的情绪分布，引导用户逐步深入了解信息。

#### **二、 整体布局与核心组件 (采用选项卡方案)**

我们将采用一个经典的三段式布局：**头部**、**主内容区**和**状态栏**。

**布局草图 (Layout Mockup):**

```mermaid
+-------------------------------------------------------------+
|               实时表情识别分析器 (Header)                   |
+-------------------------------------------------------------+
|                                                             |
|         [ 实时视频分析 ]      [ 上传图片分析 ]              |  <-- 2. 模式切换区 (Tabs)
|        +--------------------------------------------------+ |
|        |                                                  | |
|        |           (这里是主内容区)                       | |  <-- 3. 主内容区
|        |                                                  | |
|        +--------------------------------------------------+ |
|                                                             |
|                        分析结果 (Results)                     |  <-- 4. 结果展示区 (集成在主内容区下方)
|                                                             |
|           😮         Surprised (78%)                        |
|                                                             |
+-------------------------------------------------------------+
|   状态: 等待操作... (Status Bar)                            |  <-- 5. 状态反馈栏
+-------------------------------------------------------------+
```

---

#### **三、 组件详细设计**

**1. 页面头部 (Header)**
***功能**: 显示应用名称。
***元素**: `<h1>实时表情识别分析器</h1>`
***设计**: 字体简洁有力，始终置顶。

**2. 模式切换区 (Mode Switcher)**
***功能**: 允许用户在两个核心功能间切换。
***元素**: 一组选项卡按钮 (Tabs)。
***设计**: 当前激活的选项卡应有明显的视觉高亮（如下划线、不同背景色）。切换时，下方的主内容区应有平滑的过渡效果。

**3. 主内容区 (Main Content Area)**
这是UI的核心，其内容根据所选模式动态变化。

***A. 实时视频分析面板 (当“实时视频分析”Tab被激活时)**
    ***初始状态**:
        *显示一个占位符区域，内含摄像头图标和提示文字，如“准备就绪，点击下方按钮开始”。
        *下方有一个状态为 **"开始分析"** 的主按钮。
    ***运行状态**:
        *占位符区域被 `<video>` 元素取代，实时显示**水平翻转（镜像）**的摄像头画面。
        *主按钮的文字变为 **"停止分析"**，颜色也相应改变（如变为红色）。
    ***交互**: 点击按钮触发开始/停止逻辑。

***B. 上传图片分析面板 (当“上传图片分析”Tab被激活时)**
    ***初始状态**:
        *显示一个设计精美的“文件拖放区”，包含图标和文字提示，如“**点击此处选择图片，或将图片拖拽到这里**”。
        *这个区域本身就是一个隐藏的 `<input type="file" accept="image/*">` 的可视化封装。
    ***上传后状态**:
        *拖放区被 `<img>` 元素取代，清晰地展示用户上传的图片。
        *图片下方或旁边可以有一个“重新上传”的按钮。
        *一旦图片显示，应**自动触发**分析流程。

**4. 结果展示区 (Results Display Area)**
***功能**: 以丰富、直观的方式展示AI分析结果。此区域对两种模式通用。
***设计 (分层展示)**:
    ***第一层：核心情绪 (Dominant Emotion)**
        ***Emoji图标**: 一个大尺寸、动态更新的Emoji表情，作为最直观的视觉信号。
        ***情绪文本**: 旁边是用粗体、大号字显示的情绪名称（如 `Happy`）。
    ***第二层：置信度 (Confidence Score)**
        *在情绪文本旁边，用稍小的字体显示AI的置信度百分比（如 `(92%)`）。
    ***第三层：情绪分布详情 (Emotion Distribution)**
        *下方展示一个包含所有主要情绪的列表。
        *每种情绪都由一个带动画效果的**水平条形图**来表示其占比，后面跟着具体的百分比数字。这能极大地提升专业感和视觉效果。
    ***空状态**: 在分析开始前或没有检测到人脸时，此区域应显示提示信息，如“等待分析结果...”或“未检测到人脸”。

**5. 状态反馈栏 (Status & Feedback Bar)**
***功能**: 提供全局的、非侵入式的系统状态通知。
***位置**: 固定在页面底部。
***显示内容示例**:
    *`正在请求摄像头权限...`
    *`图片上传成功，正在分析...`
    *`分析进行中... (实时模式)`
    *`错误：无法连接到分析服务器。`
    *`分析已停止。`

#### **四、 交互流程 (Interaction Flow)**

***实时视频分析流程**:
    1.  用户进入页面，默认显示此面板。
    2.  点击 **"开始分析"**。
    3.  应用请求摄像头权限。状态栏提示。
    4.  用户授权后，`<video>` 元素播放画面。按钮变为 **"停止分析"**。
    5.  前端开始定时循环：**截取视频帧 -> 转换为Base64 -> 发送至后端 -> 接收结果 -> 更新结果展示区**。状态栏提示“分析进行中...”。
    6.  用户点击 **"停止分析"**，循环停止，摄像头关闭，界面恢复初始状态。

***上传图片分析流程**:
    1.  用户切换到“上传图片分析”Tab。
    2.  用户点击或拖拽图片到指定区域。
    3.  前端使用 `FileReader` 将图片转为Base64。状态栏提示“正在上传...”。
    4.  **自动**将Base64数据发送至后端。状态栏提示“正在分析...”。
    5.  接收到结果后，更新结果展示区。

#### **五、 体验增强建议 (Week 3 优化任务)**

***动画与过渡**: 为结果的更新（文字、Emoji、条形图）添加平滑的CSS过渡效果。
***响应式设计**: 确保在不同宽度的屏幕上，布局依然保持美观和可用。
***暗黑模式**: 提供一个主题切换按钮，支持亮色和暗色两种视觉主题。
***加载指示器 (Spinner)**: 在等待后端响应时，在结果区显示一个加载动画，提升用户体验。

这份设计方案为前端开发提供了清晰的指引和目标，主力B可以据此搭建组件、实现交互逻辑。